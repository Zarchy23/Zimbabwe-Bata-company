const PRODUCTS=[{id:1,name:'Classic Sneakers',price:45,img:'images/shoe1.jpg'},{id:2,name:'Formal Leather Shoes',price:60,img:'images/shoe2.jpg'},{id:3,name:'Kids School Shoes',price:30,img:'images/shoe3.jpg'},{id:4,name:'Canvas Slip-ons',price:25,img:'images/shoe4.jpg'}];const CART_KEY='bata_cart_v2';function getCart(){return JSON.parse(localStorage.getItem(CART_KEY)||'[]');}function saveCart(c){localStorage.setItem(CART_KEY,JSON.stringify(c));updateCartCount();}function updateCartCount(){const el=document.getElementById('cartCount');if(!el) return;const total=getCart().reduce((s,i)=>s+i.qty,0);el.textContent=total;}function addToCart(id){const p=PRODUCTS.find(x=>x.id==id);if(!p) return;const cart=getCart();const found=cart.find(i=>i.id==p.id);if(found) found.qty++; else cart.push({id:p.id,name:p.name,price:p.price,qty:1,img:p.img});saveCart(cart);}function removeFromCart(id){let c=getCart();c=c.filter(i=>i.id!=id);saveCart(c);}function renderCartItems(){const container=document.getElementById('cartItems');if(!container) return;const cart=getCart();if(cart.length===0){container.innerHTML='<p>Your cart is empty</p>';document.getElementById('cartTotal').textContent='0.00';return;}container.innerHTML=cart.map(i=>`<div class='cart-row'><img src='${i.img}' style='width:60px;height:50px;object-fit:cover;border-radius:6px'/><div style='margin-left:10px'><strong>${i.name}</strong><div>$${i.price} x ${i.qty}</div></div><button class='btn remove' data-id='${i.id}'>Remove</button></div>`).join('');document.getElementById('cartTotal').textContent = cart.reduce((s,i)=>s+i.price*i.qty,0).toFixed(2);}document.addEventListener('click',e=>{if(e.target.matches('.add')||e.target.closest('.add')){const id = e.target.dataset?.id || e.target.closest('.add')?.dataset?.id; if(id){ addToCart(Number(id)); alert('Added to cart'); }} else if(e.target.matches('#cartBtn') || e.target.closest('#cartBtn')){document.getElementById('cartModal').style.display='flex'; renderCartItems();} else if(e.target.matches('#closeCart') || e.target.matches('.modal .close')){document.getElementById('cartModal').style.display='none';} else if(e.target.matches('.remove')){removeFromCart(Number(e.target.dataset.id)); renderCartItems();} else if(e.target.matches('#checkoutBtn')){alert('Checkout simulated. Thank you!'); localStorage.removeItem(CART_KEY); renderCartItems(); updateCartCount(); document.getElementById('cartModal').style.display='none';}});document.addEventListener('DOMContentLoaded',()=>{const pg = document.getElementById('productGrid'); if(pg) pg.innerHTML = PRODUCTS.map(p=>`<div class='product-card'><img src='${p.img}' alt='${p.name}'><h3>${p.name}</h3><p>$${p.price}</p><button class='btn add' data-id='${p.id}'>Add to Cart</button></div>`).join(''); const fg = document.getElementById('featuredGrid'); if(fg) fg.innerHTML = PRODUCTS.slice(0,3).map(p=>`<div class='product-card'><img src='${p.img}' alt='${p.name}'><h3>${p.name}</h3><p>$${p.price}</p><button class='btn add' data-id='${p.id}'>Add to Cart</button></div>`).join(''); updateCartCount();});